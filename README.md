# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Данные и типы данных
Данные карточки
```
type LotCategories =
    'софт-скилс'
	'другое'
	'дополнительное'
	'кнопка'
	'хард-скил';  
```
```
interface LotCard {
	id: string; //Id лота
	title: string; //заголовок лота
    description: string; //описание лота
    image: string; //картинка лота
	price: number | null; //цена лота
	category: LotCategories; //кактегория лота
}
```
Данные пользователя 
```
interface OrderForm {
    payment: string; 
	address: string;
	email: string;
	phone: string;
}
```
## Документация
Модель данных выполнена в паттерне MVP (Model-View-Presenter):
- Базовый код
- Слой данных
- Компоненты представления 

## Базовый код

### Класс `API`
Класс доступа к веб-серверу. Обеспечивает выполнение запросав GET, POST

Методы:
- `get` - выполняет GET запрос
- `post` - выполняет POST запрос 

### Класс `Component`
Класс является дженериком и родителем всех компонентов слоя представления. Реализует базовые элементы работы с элементами, такие как переключение классов, установка текста у элемента и т.д.

### Класс `Form`
Класс для базовых форм. Является родительским для классов `OrderFirst`,`OrderSecond`\
Поля:
- _submit: HTMLButtonElement - кнопка отправки формы
- _errors: HTMLElement - контейнер для ошибок 

Методы: 
- `render` - метод рендеринга формы
- `set errors` - сеттер для установки сообщений об ошибках
- `set valid` - сеттер для установки валидности формы

### Класс `Modal`
Реалезация модальных окон\
Поля класса:
- _content: HTMLTemplateElement - содержимое модального окна
- _closeButton: HTMLButtonElement - закрытие модального окна

Методы: 
- `open` - открытие модального окна
- `close` - закрытие модального окна
- `set content` - устанавливает содержимое попапа

### Класс `EventEmitter`
Позволяет подписываться на события и уведомлять о наступлении события\
Методы:
- `on` - установить оброботчик на событие 
- `off` - снять обработчик с события
- `emit` - инициировать событие
- `trigger` - коллбек триггер, генерирующий событие при вызове

- `onAll` - Слушать все события
- `offAll` - Сбросить все обработчики

## Слой данных(Model)

### Класс `CardModel`
Класс для хранения данных товаров\
Поля:
- id: string - ID товара
- _cards: ICard[] - массив всех товаров

Методы:
- `set cards(cards: ICard[])` - сохраняет список товаров
- `get cards(cards: ICard[])` - возвращает список товаров
- `get card(id: string)` - возвращает товар по id

### Класс `CartModel`
Класс для хранения данных корзины товаров\
Поля:
- cards: ICard[] - массив товаров в корзине

Методы:
- `addToCart(card: ICard) :void` - добавляет товар в корзину
- `removeFromCart(id: string) :void` - удаляет товар из корзины
- `clearCart() :void` - очищает всю корзину 
- `totalPrice() :number` - сумма всех заказов
- `getItems() :Record<string, number>` - возвращает объект 
- `hasItem(id: string) :boolean` - проверяет, есть ли товар с конкретным ID
- `getItemCountById(id: string) :number` - возвращает количество товара в корзине по ID
- `getItemCount() :number` - общее количество товаров в корзине
- `isEmpty() :boolean` - проверка пуста ли корзина

### Класс `DeliveryForm`
Кдасс с данными пользователя для оформления заказа\
Поля:
- address :HTMLInputElement - адрес доставки
- payment :HTMLInputElement - способ оплаты

### Класс `ContactsForm`
Класс с контактоной информацией пользователя\
Поля:
- phone :HTMLInputElement  - телефон для связи
- email :HTMLInputElement  - почта для связи

Методы для `DeliveryForm` и `ContactsForm`:
- `validate` - проверяет корректность введённых данных пользователя
- `setOrderData` - устанавливает контактные данные
- `setOrderData` - устанавливает контактные данные
- `resetForm()` - очищает поля формы


## Компоненты представления
Классы представления отвечают за отображение внутри контейнера (DOM-элемент) передаваемых в них данных

### Класс `Page`
Класс представления, отображает главную страницу\
Поля класса:
- _catalog: HTMLElement - контейнер для товаров
- buttonCart: HTMLButtonElement - кнопка корзины
- _counter: HTMLSpanElement - счетчик товаров в корзине

Методы:
- `counter` - отображение количества товаров в корзине
- `catalog` - элемент отображения всех доступных карточек

### Класс `Card `
Класс с информацией карточки товара\
Поля класса:
- _id: HTMLSpanElement - ID лота
- _title: HTMLTitleElement - заголовок лота
- _description: HTMLParagraphElement - описание лота
- _image: HTMLImageElement - картинка лота
- _price: HTMLSpanElement - цена лота
- _category: HTMLSpanElement - категория лота

Методы:
- `id :string` - устанавливает ID лота
- `title :string` - устанавливает заголовок лота
- `description :string` - устанавливает описание лота
- `image :string` - устанавливает картинку лота
- `price :number` - устанавливает цену лота
- `category :string` - устанавливает категорию лота

### Класс `Basket`
Класс корзины товаров.\
Поля:
- button: HTMLButtonElement - кнопка оформления. `button` вызывает событие `order_payment:open`
- basketList: HTMLElement - список товаров
- totalPrice: HTMLElement - общая стоимость корзины

Методы:
- `render` - отображает список товаров
- `deleteBtn` - кнопка удаления товара
- `totalPrice` - общяя стоимость товаров

### Класс `OrderFirstStep`
Класс формы оформления заказа с оплатой и адрессом\
Поля:
- address :HTMLInputElement - поле ввода адресса
- payButton :HTMLButtonElement — кнопка оплаты
- buttonNext :HTMLButtonElement - кнопка "Далее"

Методы:
- `set address` - адрес дооставки
- `set payment` - способ оплаты

### Класс `OrderSecondStep`
Класс формы оформления заказа с почтой и телефоном\
Поля:
- email :HTMLInputElement — поле ввода email
- phone :HTMLInputElement — поле ввода номера телефона
- payButton :HTMLButtonElement — кнопка "Оплатить"

Методы:
- `set email` - email пользователя
- `set phone` - номер телефона пользователя

### Класс `OrderSuccess`
Класс окна успешной покупки\
Поля: 
- title :HTMLTitleElement - сообщение об успешной покупке
- totalPrice :HTMLElement - стоимость заказа
- button: HTMLButtonElement - кнопка "За новыми покупками"
- closeButton :HTMLButtonElement - кнопка закрытия окна 

Методы:
- `set total` - отоброженеи стоимости заказа

## Компоненты, их функции и связи с другими компонентами 

`Главная страница`
Показывает массив карточек товаров на странице, можно открыть `карточку товара` и `корзину товаров`. Получает данные массива карточек и колличества товаров в корзине

`Карточка товара`
Показывает карточку с информацией о товаре, также можно отправить товар в `корзину` нажатием на кнопку "Купить"

`Корзина`
Показывает все товары в корзине, отображает полную стоимость Корзины, имеет кнопку "Удалить" которая убирает товар из корзины, кнопка "Оформить" отправляет пользователя на `Первый Шаг Оформления заказа`

`Первый Шаг Оформления заказа`
Показывает поле адреса доставки, также отображает форму которая позваляет выбрать пользователю способ оплаты, кнопка "Далее" открывает попап со `Вторым Шагом Оформления Заказа`, если поле проходить валидность

`Второй Шаг Оформления заказа`
Показывает форму ввода e-mail и номера телефона пользователя, кнопка "Оплатить" завершает оформление заказа и открывает попап `Успешного Оформления заказа`, если поле проходит валидность.

`Успешное оформление заказа`
Сообщение об успешном оформлении заказа, кнопка "За новыми покупками!" закрывает попап, переход на Главную страницу, корзина товаров очищается.







